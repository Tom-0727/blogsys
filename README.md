# åšå®¢ç³»ç»Ÿ (BlogSys)

åŸºäº Astro æ„å»ºçš„ç°ä»£åŒ–åšå®¢ç³»ç»Ÿï¼Œæ”¯æŒæœ¬åœ°åšå®¢ç®¡ç†ã€è¯„è®ºç³»ç»Ÿå’Œç”¨æˆ·ç®¡ç†ã€‚åŸå‹æ˜¯ç”¨ MetaGPTX æ„å»ºçš„ã€‚

## ğŸš€ ç‰¹æ€§

- **æœ¬åœ°åšå®¢ç®¡ç†**: åªéœ€åœ¨æœ¬åœ°ç›®å½•ä¸­å¢åˆ æ”¹ `.md` æ–‡ä»¶ï¼Œå³å¯è‡ªåŠ¨åœ¨å‰ç«¯å±•ç¤º
- **è¯„è®ºç³»ç»Ÿ**: å®Œæ•´çš„è¯„è®ºåŠŸèƒ½ï¼Œæ”¯æŒç”¨æˆ·äº’åŠ¨
- **ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ**: åŒ…å«ç”¨æˆ·æ³¨å†Œã€ç™»å½•ç­‰åŠŸèƒ½
- **æœ¬åœ°æ•°æ®åº“**: ä½¿ç”¨ SQLite3 è¿›è¡Œæœ¬åœ°æ•°æ®å­˜å‚¨ï¼Œæ— éœ€é¢å¤–é…ç½®
- **æœåŠ¡å™¨ç«¯æ¸²æŸ“**: åŸºäº Astro çš„ SSR åŠŸèƒ½ï¼Œæä¾›æ›´å¥½çš„SEOå’Œæ€§èƒ½

## ğŸ“‹ æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: Astro + MDX
- **æ•°æ®åº“**: SQLite3
- **è¿è¡Œæ—¶**: Node.js
- **æ ·å¼**: CSS

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹
### ä¸‹è½½repo
```bash
git clone https://github.com/Tom-0727/blogsys.git  
cd blogsys
```

### å®‰è£…ä¾èµ–

```bash
npm install
```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```


## ğŸ“ åšå®¢ç®¡ç†

1. åœ¨ `src/content/blog/` ç›®å½•ä¸‹åˆ›å»º `.md` æ–‡ä»¶
2. æ–‡ä»¶å°†è‡ªåŠ¨è¢«ç³»ç»Ÿè¯†åˆ«å¹¶åœ¨å‰ç«¯å±•ç¤º
3. æ”¯æŒ Markdown è¯­æ³•å’Œ MDX ç»„ä»¶

## ğŸ—‚ï¸ é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ content/blog/     # åšå®¢æ–‡ç« ç›®å½•
â”‚   â”œâ”€â”€ pages/           # é¡µé¢è·¯ç”±
â”‚   â”‚   â””â”€â”€ api/         # API è·¯ç”±
â”‚   â”œâ”€â”€ components/      # ç»„ä»¶
â”‚   â””â”€â”€ layouts/         # å¸ƒå±€æ¨¡æ¿
â”œâ”€â”€ public/              # é™æ€èµ„æº
â””â”€â”€ data/               # æ•°æ®åº“æ–‡ä»¶(ä»repoä¸‹è½½æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œä½†å¯åŠ¨ä¼šè‡ªåŠ¨ç”Ÿæˆ)
```

# éƒ¨ç½²
- åŸºäºé˜¿é‡Œäº‘æœåŠ¡å™¨çš„éƒ¨ç½²
## åœ¨é˜¿é‡Œäº‘å¹³å°å®Œæˆä»¥ä¸‹å‡†å¤‡
- åˆ›å»ºå®ä¾‹
    1. ç™»é™†https://www.aliyun.com/
    2. æ‰¾åˆ°äº‘æœåŠ¡å™¨ECSåˆ›å»ºå®ä¾‹ï¼Œé…ç½®2vcpu + 2Gå†…å­˜ + 20Gç¡¬ç›˜å°±å®Œå…¨å¤Ÿäº†
- è´­ä¹°åŸŸå
    1. åœ¨é˜¿é‡Œäº‘å¹³å°æ‰¾åˆ°â€œåŸŸåâ€
    2. æ ¹æ®éœ€æ±‚è´­ä¹°å³å¯ï¼Œè®°å¾—å®Œæˆå®åæ³¨å†Œ

## é¡¹ç›®è·‘é€š
- ç™»é™†é˜¿é‡Œäº‘ç§Ÿçš„å®ä¾‹ï¼šæ¯”å¦‚ç”¨sshè¿æ¥
- ä¸‹è½½repoå¹¶è·‘é€šï¼š
    ```bash
    # ä¸‹æ‹‰ä»£ç åº“
    git clone https://github.com/Tom-0727/blogsys.git
    cd blogsys

    # å¼€å‘æ¨¡å¼ä¸‹æ˜¯å¦èƒ½è·‘é€š
    npm install
    npm run dev

    # ç”Ÿäº§æ¨¡å¼ä¸‹æ˜¯å¦èƒ½è·‘é€š
    npm run build
    npm run preview
    ```
- è·‘é€šåï¼Œç”¨pm2è·‘é€šï¼Œå®ç°æœåŠ¡å¸¸é©»ï¼ˆå°±æ˜¯è¯´å³ä½¿å…³é—­sshè¿æ¥æœåŠ¡ä¾ç„¶ä¼šè·‘ï¼‰
    ```bash
    npm install -g pm2
    pm2 start "npm run preview" --name blogsys

    # è®¾ç½®å¼€æœºè‡ªå¯
    pm2 startup
    pm2 save
    ```
- ç»è¿‡ä¸Šè¿°æ“ä½œä¹‹åï¼Œä½ çš„æœåŠ¡å°±å¸¸æ€åŒ–è·‘èµ·æ¥äº†ï¼Œæ¥ä¸‹æ¥ä¸ºäº†è®©å…¬ç½‘èƒ½çœ‹åˆ°ï¼Œè¿˜éœ€è¦è®¾ç½®åå‘ä»£ç†å’ŒHTTPSè¯ä¹¦éƒ¨ç½²ï¼ˆæ›´å®‰å…¨ï¼‰
    ```bash
    # å®‰è£…å’Œè®¾ç½®åå‘ä»£ç†
    sudo apt install -y nginx
    sudo systemctl enable --now nginx
    ## ä¸‹é¢è¿™ä¸ªåœ°å€ä¸ç”¨æ”¹ï¼Œæ˜¯é»˜è®¤çš„
    touch /etc/nginx/sites-available/blogsys.conf
    ## å¾€æ–‡ä»¶é‡Œå¡«å…¥ä¸‹é¢çš„å†…å®¹
    '''
    server {
            listen 443 ssl;
            server_name æ”¹æˆä½ çš„åŸŸåæ¯”å¦‚tom-blogs.top www.tom-blogs.top;

            ssl_certificate /etc/letsencrypt/live/tom-blogs.top/fullchain.pem;
            ssl_certificate_key /etc/letsencrypt/live/tom-blogs.top/privkey.pem;

            location / {
                proxy_pass http://127.0.0.1:4321;
                proxy_http_version 1.1;
                proxy_set_header Upgrade $http_upgrade;
                proxy_set_header Connection 'upgrade';
                proxy_set_header Host $host;
                proxy_cache_bypass $http_upgrade;
            }
        }
    '''
    ## ä¿å­˜å¹¶ reload
    sudo nginx -t && sudo systemctl reload nginx

    # ç”³è¯·HTTPSè¯ä¹¦
    sudo apt install certbot python3-certbot-nginx -y
    sudo certbot --nginx -d ä½ çš„åŸŸå1 -d ä½ çš„åŸŸå2 ...
    ```
- å¤§åŠŸå‘Šæˆï¼è¿™æ—¶å€™åªéœ€è¦åœ¨é˜¿é‡Œäº‘ç®¡ç†-å®ä¾‹ç®¡ç†-å®‰å…¨ç»„-ç®¡ç†è§„åˆ™-å…¥æ–¹å‘ æ·»åŠ 443ç«¯å£å’Œ80ç«¯å£ï¼Œå…¨éƒ¨è®¾ç½®æˆæ‰€æœ‰IPv4å³å¯
- ç„¶åå¤§å®¶å°±å¯ä»¥ä»å…¬ç½‘è®¿é—®ä½ çš„ç½‘ç«™äº†ï¼
